@using System.Security.Claims
@using MeetingRoomBooking.Services.Manager
@model IEnumerable<MeetingRoomBooking.Data.Models.User>
@{
    Layout = "_HomeLayout";
}

<div style="display:flex;">
    <h2>User List</h2>
    <div style="flex: 1;"></div>
    <a class="btn btn-primary" style="align-content:center" asp-action="Create">Create User</a>
</div>

<table class="table">
    <thead>
        <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Phone No.</th>
            @if (int.TryParse(User.FindFirstValue("Role"), out int role) && role == 2) {
                <th>Password</th>
            }
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var user in Model) {
            <tr>
                <td>@user.FirstName</td>
                <td>@user.LastName</td>
                <td>@user.Email</td>
                <td>@user.Phone</td>
                @if (int.TryParse(User.FindFirstValue("Role"), out int role2) && role2 == 2) {
                    <td>@PasswordManager.DecryptPassword(user.Password)</td>
                }
                <td>
                    <a asp-action = "Details" asp-route-id="@user.UserId" style="text-decoration:none">
                     Details<i class="bi bi-person-fill-gear" style="color:#37A3E0; font-size:20px"></i>
                    </a>
                    
                </td>
            </tr>
        }
    </tbody>
</table>

